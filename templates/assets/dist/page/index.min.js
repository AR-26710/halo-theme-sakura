import{d,_ as m,s as a}from"../main.min.js";import"../assets/_commonjsHelpers-042e6b4d.js";var y=Object.defineProperty,g=Object.getOwnPropertyDescriptor,c=(i,t,o,n)=>{for(var r=n>1?void 0:n?g(t,o):t,s=i.length-1,e;s>=0;s--)(e=i[s])&&(r=(n?e(t,o,r):e(r))||r);return n&&r&&y(t,o,r),r};class u{registerArrowDown(){const t=document.querySelector(".headertop-down");t&&m(()=>Promise.resolve({}),["css/font-awesome-animation.min.min.css"]),t==null||t.addEventListener("click",()=>{var n;const o=((n=document.querySelector(".site-content"))==null?void 0:n.getBoundingClientRect().top)||0;window.scrollTo({top:o+ +window.pageYOffset,behavior:"smooth"})})}registerBackgroundChangeEvent(){const t=document.querySelector(".bg-change-js");if(!t)return;const o=document.getElementById("bg-next"),n=document.getElementById("bg-prev"),r=(a.getThemeConfig("random_image","rimage_cover_back_num",Number)||0).valueOf();o==null||o.addEventListener("click",()=>{let e=Number(t.getAttribute("data-currIndex"));r===0?e=Math.ceil(Math.random()*99):e=(e+1)%r,s(e)}),n==null||n.addEventListener("click",()=>{let e=Number(t.getAttribute("data-currIndex"));r===0?e=Math.ceil(Math.random()*99):e=(e-1+r)%r,s(e)});const s=e=>{const l=t.getAttribute("data-url");t.src=`${l}&t=${e}`,t.setAttribute("data-currIndex",`${e}`)}}registerBackgroundVideo(){const t=document.querySelector(".video-container");if(!t)return;t.insertAdjacentElement("afterbegin",document.createElement("video"));const o=t.querySelector(".video-status"),n=document.querySelector(".focusinfo"),r=t.querySelector(".video-play"),s=t.querySelector(".video-pause");let e;r==null||r.addEventListener("click",async()=>{o.innerHTML=a.translate("home.video.loading","正在载入视频 ..."),o.style.bottom="0",m(()=>import("../assets/video.es-db0fa9e7.js"),["assets/video.es-db0fa9e7.js","assets/_commonjsHelpers-042e6b4d.js"]).then(l=>{var p;if(e){e.play();return}e=l.default(t.querySelector("video"),{controls:!1,controlsBar:!1,children:["MediaLoader"],autoplay:!1,preload:"auto",muted:!1,loop:!1,sources:[{src:(p=a.getThemeConfig("mainScreen","bgvideo_url",String))==null?void 0:p.toString()}]}),e.on("loadeddata",()=>{o.style.bottom="-100px",n.style.top="-999px",r.style.display="none",s.style.display="block",e.play()}),e.on("play",()=>{o.style.bottom="-100px",n.style.top="-999px",r.style.display="none",s.style.display="block"}),e.on("pause",()=>{o.innerHTML=a.translate("home.video.statu_pause","已暂停 ..."),o.style.bottom="0",n.style.top="0",r.style.display="block",s.style.display="none"}),e.on("waiting",()=>{o.innerHTML=a.translate("home.video.statu_waiting","加载中 ..."),o.style.bottom="0"}),e.on("canplay",()=>{o.style.bottom="-100px"}),e.on("error",()=>{o.innerHTML=a.translate("home.video.statu_error","视频播放错误"),setTimeout(()=>{n.style.top="0",o.style.bottom="-100px",r.style.display="block",s.style.display="none",e.dispose(),e=void 0,t.insertAdjacentElement("afterbegin",document.createElement("video"))},2e3)}),e.on("ended",()=>{n.style.top="0",o.style.bottom="-100px",r.style.display="block",s.style.display="none",e.dispose(),e=void 0,t.insertAdjacentElement("afterbegin",document.createElement("video"))})}).catch(l=>{console.error(l),o.innerHTML=a.translate("home.video.statu_error","视频加载失败"),o.style.bottom="0",setTimeout(()=>{o.style.bottom="-100px"},2e3)})}),s==null||s.addEventListener("click",()=>{e&&e.pause()})}}c([d()],u.prototype,"registerArrowDown",1);c([d()],u.prototype,"registerBackgroundChangeEvent",1);c([d()],u.prototype,"registerBackgroundVideo",1);
